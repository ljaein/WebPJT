{"remainingRequest":"C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\src\\components\\modal\\LoginModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\src\\components\\modal\\LoginModal.vue","mtime":1595307513603},{"path":"C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgIi4uLy4uL2Fzc2V0cy9jc3MvcG9zdC5zY3NzIjsNCmltcG9ydCAiLi4vLi4vYXNzZXRzL2Nzcy91c2VyLnNjc3MiOw0KaW1wb3J0IFBWIGZyb20gInBhc3N3b3JkLXZhbGlkYXRvciI7DQppbXBvcnQgKiBhcyBFbWFpbFZhbGlkYXRvciBmcm9tICJlbWFpbC12YWxpZGF0b3IiOw0KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsNCg0KY29uc3QgYmFzZVVSTCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODAvYWNjb3VudCI7DQpjb25zdCBzdG9yYWdlID0gd2luZG93LnNlc3Npb25TdG9yYWdlOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJQb3N0IiwNCiAgY29tcG9uZW50czoge30sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5wYXNzd29yZFNjaGVtYQ0KICAgICAgLmlzKCkNCiAgICAgIC5taW4oOCkNCiAgICAgIC5pcygpDQogICAgICAubWF4KDEwMCkNCiAgICAgIC5oYXMoKQ0KICAgICAgLmRpZ2l0cygpDQogICAgICAuaGFzKCkNCiAgICAgIC5sZXR0ZXJzKCk7DQogIH0sDQogIHdhdGNoOiB7DQogICAgcGFzc3dvcmQ6IGZ1bmN0aW9uKHYpIHsNCiAgICAgIHRoaXMuY2hlY2tGb3JtKCk7DQogICAgfSwNCiAgICBlbWFpbDogZnVuY3Rpb24odikgew0KICAgICAgdGhpcy5jaGVja0Zvcm0oKTsNCiAgICB9DQogIH0sDQoNCiAgbWV0aG9kczogew0KICAgIGNoZWNrRm9ybSgpIHsNCiAgICAgIGlmICh0aGlzLmVtYWlsLmxlbmd0aCA+IDAgJiYgIUVtYWlsVmFsaWRhdG9yLnZhbGlkYXRlKHRoaXMuZW1haWwpKQ0KICAgICAgICB0aGlzLmVycm9yLmVtYWlsID0gIuydtOuplOydvCDtmJXsi53snbQg7JWE64uZ64uI64ukLiI7DQogICAgICBlbHNlIHRoaXMuZXJyb3IuZW1haWwgPSBmYWxzZTsNCg0KICAgICAgaWYgKA0KICAgICAgICB0aGlzLnBhc3N3b3JkLmxlbmd0aCA+IDAgJiYNCiAgICAgICAgIXRoaXMucGFzc3dvcmRTY2hlbWEudmFsaWRhdGUodGhpcy5wYXNzd29yZCkNCiAgICAgICkNCiAgICAgICAgdGhpcy5lcnJvci5wYXNzd29yZCA9ICLsmIHrrLgs7Iir7J6QIO2PrO2VqCA4IOyekOumrOydtOyDgeydtOyWtOyVvCDtlanri4jri6QuIjsNCiAgICAgIGVsc2UgdGhpcy5lcnJvci5wYXNzd29yZCA9IGZhbHNlOw0KICAgIH0sDQogICAgbG9naW4oKSB7DQogICAgICBheGlvcw0KICAgICAgICAuZ2V0KGAke2Jhc2VVUkx9L2xvZ2luLyR7dGhpcy5lbWFpbH0vJHt0aGlzLnBhc3N3b3JkfWApDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOw0KICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygpOw0KICAgICAgICAgIC8vIGFsZXJ0KHRoaXMuJHNlc3Npb24uZ2V0KCJsb2dpbl91c2VyIikpOw0KICAgICAgICAgIC8vIGF4aW9zLmdldChgJHtiYXNlVVJMfS9nZXR1c2VyaW5mb2ApDQogICAgICAgICAgLy8gLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIC8vICAgICBhbGVydChyZXNwb25zZSk7DQogICAgICAgICAgLy8gfSkNCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7DQogICAgICAgICAgICAgIHZhciBqd3QgPSByZXF1aXJlKCJqc29ud2VidG9rZW4iKTsNCiAgICAgICAgICAgICAgdmFyIHRva2VuID0gand0LnNpZ24oeyBzdWI6IHRoaXMuZW1haWwgfSwgdGhpcy5wYXNzd29yZCk7DQogICAgICAgICAgICAgIHRoaXMuJGNvb2tpZXMuc2V0KCJBdXRoLVRva2VuIiwgdG9rZW4pOw0KICAgICAgICAgICAgICB0aGlzLiRjb29raWVzLnNldCgiVXNlciIsIHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsNCiAgICAgICAgICAgICAgdGhpcy5uYW1lID0gcmVzcG9uc2UuZGF0YS5uYW1lOw0KICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOw0KICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyLnJlc3BvbnNlKTsNCiAgICAgICAgICBhbGVydCgi7JWE7J2065SUIOuwjyDruYTrsIDrsojtmLjrpbwg7ZmV7J247ZW07KO87IS47JqULiIpOw0KICAgICAgICAgIHRoaXMuZW1haWwgPSAiIjsNCiAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gIiI7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgam9pbjogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3VzZXIvam9pbi8iKTsNCiAgICB9DQogIH0sDQogIGRhdGE6ICgpID0+IHsNCiAgICByZXR1cm4gew0KICAgICAgZW1haWw6ICIiLA0KICAgICAgcGFzc3dvcmQ6ICIiLA0KICAgICAgcGFzc3dvcmRTY2hlbWE6IG5ldyBQVigpLA0KICAgICAgZXJyb3I6IHsNCiAgICAgICAgZW1haWw6IGZhbHNlLA0KICAgICAgICBwYXNzd29yZDogZmFsc2UNCiAgICAgIH0sDQogICAgICBwYXNzd29yZFR5cGU6ICJwYXNzd29yZCINCiAgICB9Ow0KICB9DQp9Ow0K"},{"version":3,"sources":["LoginModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginModal.vue","sourceRoot":"src/components/modal","sourcesContent":["<template>\r\n  <!-- Modal -->\r\n  <div\r\n    class=\"modal fade\"\r\n    id=\"LoginModal\"\r\n    tabindex=\"-1\"\r\n    role=\"dialog\"\r\n    aria-labelledby=\"exampleModalLabel\"\r\n    aria-hidden=\"true\"\r\n  >\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">로그인</h5>\r\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"user\" id=\"login\">\r\n            <div class=\"wrapC table\">\r\n              <!-- <div class=\"middle\"> -->\r\n              <h1>SS_log</h1>\r\n              <div class=\"input-wrap\">\r\n                <input\r\n                  v-model=\"email\"\r\n                  v-bind:class=\"{error : error.email, complete:!error.email&&email.length!==0}\"\r\n                  id=\"email\"\r\n                  placeholder=\"이메일을 입력해주세요\"\r\n                  type=\"text\"\r\n                />\r\n                <div class=\"error-text\" v-if=\"error.email\">{{error.email}}</div>\r\n              </div>\r\n              <div class=\"input-wrap\">\r\n                <input\r\n                  v-model=\"password\"\r\n                  v-bind:class=\"{error : error.password, complete:!error.password&&password.length!==0}\"\r\n                  :type=\"passwordType\"\r\n                  id=\"password\"\r\n                  placeholder=\"영문, 숫자 혼용 8자 이상\"\r\n                />\r\n                <span :class=\"{active : passwordType==='text'}\">\r\n                  <i class=\"fas fa-eye\"></i>\r\n                </span>\r\n                <div class=\"error-text\" v-if=\"error.password\">{{error.password}}</div>\r\n              </div>\r\n              <button class=\"btn btn--back btn--login\" @click=\"login\" data-dismiss=\"modal\">로그인</button>\r\n              <div class=\"add-option\">\r\n                <div class=\"wrap\">\r\n                  <p>아직 회원이 아니신가요?</p>\r\n                  <button type=\"button\" class=\"btn--text\" @click=\"join\" data-dismiss=\"modal\">회원가입</button>\r\n                  <!-- <router-link v-bind:to=\"{name:constants.URL_TYPE.USER.JOIN}\" class=\"btn--text\">회원가입</router-link> -->\r\n                </div>\r\n              </div>\r\n              <!-- </div> -->\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"login-btn\" data-dismiss=\"modal\">Close</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"../../assets/css/post.scss\";\r\nimport \"../../assets/css/user.scss\";\r\nimport PV from \"password-validator\";\r\nimport * as EmailValidator from \"email-validator\";\r\nimport axios from \"axios\";\r\n\r\nconst baseURL = \"http://localhost:8080/account\";\r\nconst storage = window.sessionStorage;\r\n\r\nexport default {\r\n  name: \"Post\",\r\n  components: {},\r\n  created() {\r\n    this.passwordSchema\r\n      .is()\r\n      .min(8)\r\n      .is()\r\n      .max(100)\r\n      .has()\r\n      .digits()\r\n      .has()\r\n      .letters();\r\n  },\r\n  watch: {\r\n    password: function(v) {\r\n      this.checkForm();\r\n    },\r\n    email: function(v) {\r\n      this.checkForm();\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    checkForm() {\r\n      if (this.email.length > 0 && !EmailValidator.validate(this.email))\r\n        this.error.email = \"이메일 형식이 아닙니다.\";\r\n      else this.error.email = false;\r\n\r\n      if (\r\n        this.password.length > 0 &&\r\n        !this.passwordSchema.validate(this.password)\r\n      )\r\n        this.error.password = \"영문,숫자 포함 8 자리이상이어야 합니다.\";\r\n      else this.error.password = false;\r\n    },\r\n    login() {\r\n      axios\r\n        .get(`${baseURL}/login/${this.email}/${this.password}`)\r\n        .then(response => {\r\n          console.log(response.data);\r\n          this.$router.push(\"/\");\r\n          this.$router.go();\r\n          // alert(this.$session.get(\"login_user\"));\r\n          // axios.get(`${baseURL}/getuserinfo`)\r\n          // .then(response => {\r\n          //     alert(response);\r\n          // })\r\n            if (response.status == 200) {\r\n              var jwt = require(\"jsonwebtoken\");\r\n              var token = jwt.sign({ sub: this.email }, this.password);\r\n              this.$cookies.set(\"Auth-Token\", token);\r\n              this.$cookies.set(\"User\", response.data);\r\n              console.log(response.data);\r\n              this.name = response.data.name;\r\n              this.$router.push(\"/\");\r\n              this.$router.go();\r\n            }\r\n        })\r\n        .catch(err => {\r\n          console.log(err.response);\r\n          alert(\"아이디 및 비밀번호를 확인해주세요.\");\r\n          this.email = \"\";\r\n          this.password = \"\";\r\n        });\r\n    },\r\n    join: function() {\r\n      this.$router.push(\"/user/join/\");\r\n    }\r\n  },\r\n  data: () => {\r\n    return {\r\n      email: \"\",\r\n      password: \"\",\r\n      passwordSchema: new PV(),\r\n      error: {\r\n        email: false,\r\n        password: false\r\n      },\r\n      passwordType: \"password\"\r\n    };\r\n  }\r\n};\r\n</script>\r\n"]}]}