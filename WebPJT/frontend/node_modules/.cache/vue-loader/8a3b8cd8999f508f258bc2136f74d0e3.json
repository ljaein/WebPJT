{"remainingRequest":"C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\src\\page\\user\\Info.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\src\\page\\user\\Info.vue","mtime":1595229892536},{"path":"C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\leejaein\\project-sub1\\s03p11b223\\WebPJT\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgIi4uLy4uL2Fzc2V0cy9jc3MvdXNlci5zY3NzIjsNCmltcG9ydCBQViBmcm9tICJwYXNzd29yZC12YWxpZGF0b3IiOw0KaW1wb3J0ICogYXMgRW1haWxWYWxpZGF0b3IgZnJvbSAiZW1haWwtdmFsaWRhdG9yIjsNCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7DQoNCmNvbnN0IGJhc2VVUkwgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FjY291bnQiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHt9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMucGFzc3dvcmRTY2hlbWENCiAgICAgIC5pcygpDQogICAgICAubWluKDgpDQogICAgICAuaXMoKQ0KICAgICAgLm1heCgxMDApDQogICAgICAuaGFzKCkNCiAgICAgIC5kaWdpdHMoKQ0KICAgICAgLmhhcygpDQogICAgICAubGV0dGVycygpOw0KICAgIHRoaXMuZW1haWwgPSB0aGlzLiRjb29raWVzLmdldCgiVXNlciIpLmVtYWlsOw0KICAgIGF4aW9zDQogICAgICAgIC5nZXQoYCR7YmFzZVVSTH0vdmlld0luZm8vJHt0aGlzLmVtYWlsfWApDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLm5hbWUgPSByZXNwb25zZS5kYXRhLm5hbWU7DQogICAgICAgICAgdGhpcy5uaWNrbmFtZSA9IHJlc3BvbnNlLmRhdGEubmlja25hbWU7DQogICAgICAgICAgdGhpcy5pbWd1cmwgPSByZXNwb25zZS5kYXRhLmltZ3VybDsNCiAgICAgICAgICBhbGVydCh0aGlzLmltZ3VybCk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdQYXJhbXMnLCBwYXJhbXM6IHtuYW1lOiBlcnIucmVzcG9uc2Uuc3RhdHVzfX0pOw0KICAgICAgICB9KTsNCiAgfSwNCg0KICB3YXRjaDogew0KICAgIHBhc3N3b3JkOiBmdW5jdGlvbih2KSB7DQogICAgICB0aGlzLmNoZWNrRm9ybSgpOw0KICAgIH0sDQogICAgcGFzc3dvcmRjb25maXJtOiBmdW5jdGlvbih2KSB7DQogICAgICB0aGlzLmNoZWNrRm9ybSgpOw0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGNoZWNrRm9ybSgpIHsNCiAgICAgIGlmICgNCiAgICAgICAgdGhpcy5wYXNzd29yZC5sZW5ndGggPiAwICYmDQogICAgICAgICF0aGlzLnBhc3N3b3JkU2NoZW1hLnZhbGlkYXRlKHRoaXMucGFzc3dvcmQpDQogICAgICApDQogICAgICAgIHRoaXMuZXJyb3IucGFzc3dvcmQgPSAi7JiB66y4LOyIq+yekCDtj6ztlaggOCDsnpDrpqzsnbTsg4HsnbTslrTslbwg7ZWp64uI64ukLiI7DQogICAgICBlbHNlIHRoaXMuZXJyb3IucGFzc3dvcmQgPSBmYWxzZTsNCiAgICAgIGlmICgNCiAgICAgICAgdGhpcy5wYXNzd29yZGNvbmZpcm0ubGVuZ3RoID4gMCAmJg0KICAgICAgICB0aGlzLnBhc3N3b3JkY29uZmlybSAhPSB0aGlzLnBhc3N3b3JkDQogICAgICApDQogICAgICAgIHRoaXMuZXJyb3IucGFzc3dvcmRjb25maXJtID0gIuu5hOuwgOuyiO2YuOulvCDri6Tsi5wg7ZmV7J247ZW07KO87IS47JqULiI7DQogICAgICBlbHNlIHRoaXMuZXJyb3IucGFzc3dvcmRjb25maXJtID0gZmFsc2U7DQogICAgfSwNCiAgICBnb21vZGlmeSgpIHsNCiAgICAgIHRoaXMudmFsaWRhdGVkID0gMDsNCiAgICB9LA0KICAgIGRlbHVzZXIoKSB7DQogICAgICBheGlvcw0KICAgICAgICAuZGVsZXRlKGAke2Jhc2VVUkx9L2RlbGV0ZS8ke3RoaXMuJGNvb2tpZXMuZ2V0KCJVc2VyIikuZW1haWx9YCkNCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgIGFsZXJ0KCLtg4jth7Qg7JmE66OMIik7DQogICAgICAgICAgdGhpcy4kY29va2llcy5yZW1vdmUoIkF1dGgtVG9rZW4iKTsNCiAgICAgICAgICB0aGlzLiRjb29raWVzLnJlbW92ZSgiVXNlciIpOw0KICAgICAgICAgIHRoaXMuJGNvb2tpZXMucmVtb3ZlKCJpbWd1cmwiKTsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOw0KICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIGFsZXJ0KGJhc2VVUkwpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIG1vZGlmeSgpIHsNCiAgICAgIGxldCB7IGVtYWlsLCBuaWNrbmFtZSwgcGFzc3dvcmQsIG5hbWUsIGltZ3VybCB9ID0gdGhpczsNCiAgICAgIGxldCBkYXRhID0gew0KICAgICAgICBlbWFpbCwNCiAgICAgICAgbmlja25hbWUsDQogICAgICAgIHBhc3N3b3JkLA0KICAgICAgICBuYW1lLA0KICAgICAgICBpbWd1cmwNCiAgICAgIH07DQogICAgICBheGlvcw0KICAgICAgICAucHV0KGAke2Jhc2VVUkx9L21vZGlmeWAsIGRhdGEpDQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICBhbGVydCgi7IiY7KCVIOyZhOujjCIpOw0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvdXNlci9pbmZvIik7DQogICAgICAgICAgdGhpcy4kcm91dGVyLmdvKCk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgYWxlcnQoIuygleuztOulvCDsnoXroKXtlZjshLjsmpQuIik7DQogICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goe25hbWU6ICdQYXJhbXMnLCBwYXJhbXM6IHtuYW1lOiBlcnIucmVzcG9uc2Uuc3RhdHVzfX0pOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIG9uQ2xpY2tJbWFnZVVwbG9hZCgpIHsNCiAgICAgIHRoaXMuJHJlZnMuaW1hZ2VJbnB1dC5jbGljaygpOw0KICAgIH0sDQogICAgb25DaGFuZ2VJbWFnZXMoZSkgew0KICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZmlsZXMpOw0KICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOw0KICAgICAgdGhpcy5pbWd1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpOw0KICAgICAgLy8gdGhpcy4kY29va2llcy5zZXQoImltZ3VybCIsdGhpcy5pbWd1cmwpOw0KICAgIH0NCiAgfSwNCiAgZGF0YTogKCkgPT4gew0KICAgIHJldHVybiB7DQogICAgICBlbWFpbDogIiIsDQogICAgICBuYW1lOiAiIiwNCiAgICAgIG5pY2tuYW1lOiAiIiwNCiAgICAgIHBhc3N3b3JkOiAiIiwNCiAgICAgIHBhc3N3b3JkY29uZmlybTogIiIsDQogICAgICBwYXNzd29yZFNjaGVtYTogbmV3IFBWKCksDQogICAgICBlcnJvcjogew0KICAgICAgICBwYXNzd29yZDogZmFsc2UsDQogICAgICAgIHBhc3N3b3JkY29uZmlybTogZmFsc2UNCiAgICAgIH0sDQogICAgICBpc1Rlcm06IGZhbHNlLA0KICAgICAgcGFzc3dvcmRUeXBlOiAicGFzc3dvcmQiLA0KICAgICAgcGFzc3dvcmRDb25maXJtVHlwZTogInBhc3N3b3JkIiwNCiAgICAgIGltZ3VybDogbnVsbCwNCiAgICAgIHZhbGlkYXRlZDogMQ0KICAgIH07DQogIH0NCn07DQo="},{"version":3,"sources":["Info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Info.vue","sourceRoot":"src/page/user","sourcesContent":["<template>\r\n  <div class=\"user\" id=\"join\">\r\n    <div class=\"wrapC table\">\r\n      <div class=\"middle\">\r\n        <h1 v-if=\"validated == 1\">회원정보 조회</h1>\r\n        <h1 v-if=\"validated == 0\">회원정보 수정</h1>\r\n        <!-- img -->\r\n          <div class=\"card col-sm-12 mt-1\" align=\"left\" >\r\n            <input ref=\"imageInput\" type=\"file\" hidden @change=\"onChangeImages\" />\r\n            <img v-if=\"this.imgurl\" :src=\"this.imgurl\" />\r\n            <button type=\"button\" @click=\"onClickImageUpload\" v-if=\"validated == 0\">이미지 업로드</button>\r\n          </div>\r\n        <div class=\"card col-sm-12 mt-1\">\r\n          \r\n\r\n          <div align=\"left\">\r\n            <div class=\"form-group\" align=\"left\">\r\n              <label for=\"email\">이메일</label>\r\n              <input\r\n                class=\"form-control mb-3\"\r\n                disabled=\"false\"\r\n                v-model=\"email\"\r\n                id=\"email\"\r\n                type=\"text\"\r\n              />\r\n            </div>\r\n            <div class=\"form-group\" align=\"left\">\r\n              <label for=\"name\">이름</label>\r\n              <input\r\n                class=\"form-control mb-3\"\r\n                disabled=\"false\"\r\n                v-model=\"name\"\r\n                id=\"name\"\r\n                type=\"text\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"form-group\" align=\"left\">\r\n              <label for=\"nickname\">닉네임</label>\r\n              <input\r\n                class=\"form-control mb-3\"\r\n                :disabled=\"validated == 1\"\r\n                v-model=\"nickname\"\r\n                id=\"nickname\"\r\n                type=\"text\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"form-group\" align=\"left\" v-if=\"validated==0\">\r\n              <label for=\"pw\">비밀번호</label>\r\n              <input\r\n                class=\"form-control mb-3\"\r\n                v-model=\"password\"\r\n                v-bind:class=\"{error : error.password, complete:!error.password&&password.length!==0}\"\r\n                id=\"password\"\r\n                :type=\"passwordType\"\r\n              />\r\n              <span :class=\"{active : passwordType==='text'}\">\r\n                <i class=\"fas fa-eye\"></i>\r\n              </span>\r\n              <div class=\"error-text\" v-if=\"error.password\">{{error.password}}</div>\r\n            </div>\r\n\r\n            <div class=\"form-group\" align=\"left\" v-if=\"validated==0\">\r\n              <label for=\"name\">비밀번호 확인</label>\r\n              <input\r\n                class=\"form-control mb-3\"\r\n                v-model=\"passwordconfirm\"\r\n                v-bind:class=\"{error : error.passwordconfirm, complete:!error.passwordconfirm&&passwordconfirm.length!==0}\"\r\n                id=\"passwordconfirm\"\r\n                :type=\"passwordConfirmType\"\r\n              />\r\n              <span :class=\"{active : passwordConfirmType==='text'}\">\r\n                <i class=\"fas fa-eye\"></i>\r\n              </span>\r\n              <div class=\"error-text\" v-if=\"error.passwordconfirm\">{{error.passwordconfirm}}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <button @click=\"deluser\" class=\"btn\">\r\n          <span>탈퇴하기</span>\r\n        </button>\r\n        <button v-if=\"validated==1\" @click=\"gomodify\" class=\"btn\">\r\n          <span>수정하기</span>\r\n        </button>\r\n        <button v-if=\"validated==0\" @click=\"modify\" class=\"btn\">\r\n          <span>완료</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"../../assets/css/user.scss\";\r\nimport PV from \"password-validator\";\r\nimport * as EmailValidator from \"email-validator\";\r\nimport axios from \"axios\";\r\n\r\nconst baseURL = \"http://localhost:8080/account\";\r\n\r\nexport default {\r\n  components: {},\r\n  created() {\r\n    this.passwordSchema\r\n      .is()\r\n      .min(8)\r\n      .is()\r\n      .max(100)\r\n      .has()\r\n      .digits()\r\n      .has()\r\n      .letters();\r\n    this.email = this.$cookies.get(\"User\").email;\r\n    axios\r\n        .get(`${baseURL}/viewInfo/${this.email}`)\r\n        .then(response => {\r\n          this.name = response.data.name;\r\n          this.nickname = response.data.nickname;\r\n          this.imgurl = response.data.imgurl;\r\n          alert(this.imgurl);\r\n        })\r\n        .catch((err) => {\r\n          this.$router.push({name: 'Params', params: {name: err.response.status}});\r\n        });\r\n  },\r\n\r\n  watch: {\r\n    password: function(v) {\r\n      this.checkForm();\r\n    },\r\n    passwordconfirm: function(v) {\r\n      this.checkForm();\r\n    }\r\n  },\r\n  methods: {\r\n    checkForm() {\r\n      if (\r\n        this.password.length > 0 &&\r\n        !this.passwordSchema.validate(this.password)\r\n      )\r\n        this.error.password = \"영문,숫자 포함 8 자리이상이어야 합니다.\";\r\n      else this.error.password = false;\r\n      if (\r\n        this.passwordconfirm.length > 0 &&\r\n        this.passwordconfirm != this.password\r\n      )\r\n        this.error.passwordconfirm = \"비밀번호를 다시 확인해주세요.\";\r\n      else this.error.passwordconfirm = false;\r\n    },\r\n    gomodify() {\r\n      this.validated = 0;\r\n    },\r\n    deluser() {\r\n      axios\r\n        .delete(`${baseURL}/delete/${this.$cookies.get(\"User\").email}`)\r\n        .then(response => {\r\n          alert(\"탈퇴 완료\");\r\n          this.$cookies.remove(\"Auth-Token\");\r\n          this.$cookies.remove(\"User\");\r\n          this.$cookies.remove(\"imgurl\");\r\n          this.$router.push(\"/\");\r\n          this.$router.go();\r\n        })\r\n        .catch(() => {\r\n          alert(baseURL);\r\n        });\r\n    },\r\n    modify() {\r\n      let { email, nickname, password, name, imgurl } = this;\r\n      let data = {\r\n        email,\r\n        nickname,\r\n        password,\r\n        name,\r\n        imgurl\r\n      };\r\n      axios\r\n        .put(`${baseURL}/modify`, data)\r\n        .then(response => {\r\n          alert(\"수정 완료\");\r\n          this.$router.push(\"/user/info\");\r\n          this.$router.go();\r\n        })\r\n        .catch(() => {\r\n          alert(\"정보를 입력하세요.\");\r\n          // this.$router.push({name: 'Params', params: {name: err.response.status}});\r\n        });\r\n    },\r\n    onClickImageUpload() {\r\n      this.$refs.imageInput.click();\r\n    },\r\n    onChangeImages(e) {\r\n      console.log(e.target.files);\r\n      const file = e.target.files[0];\r\n      this.imgurl = URL.createObjectURL(file);\r\n      // this.$cookies.set(\"imgurl\",this.imgurl);\r\n    }\r\n  },\r\n  data: () => {\r\n    return {\r\n      email: \"\",\r\n      name: \"\",\r\n      nickname: \"\",\r\n      password: \"\",\r\n      passwordconfirm: \"\",\r\n      passwordSchema: new PV(),\r\n      error: {\r\n        password: false,\r\n        passwordconfirm: false\r\n      },\r\n      isTerm: false,\r\n      passwordType: \"password\",\r\n      passwordConfirmType: \"password\",\r\n      imgurl: null,\r\n      validated: 1\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n"]}]}